SYSCALLS_STAMP = $(top_builddir)/syscalls.stamp

$(SYSCALLS_STAMP): $(top_srcdir)/libc/SYSCALLS.TXT
	mkdir -p $(top_builddir)/libc/arch-@TARGET_ARCH@/syscalls
	python $(top_srcdir)/libc/tools/gensyscalls.py @TARGET_ARCH@ > $@

.PHONY: syscalls-all syscalls-clean

syscalls-all: $(SYSCALLS_STAMP)

syscalls-clean:
	rm -f $(addprefix $(top_builddir)/libc/,$(shell cat $(SYSCALLS_STAMP) 2>/dev/null)) \
		$(SYSCALLS_STAMP)

ALL_LOCAL += syscalls-all
CLEAN_LOCAL += syscalls-clean 